@using Models
@using System.Linq;
@model EventVM
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<div style="margin-top: -45px">
    <style>
        .alignleft {
            float: left;
        }
        .alignright {
            float: right;
        }

        input {
            text-align: center;
            font-weight: 500;
            color: #325d88;
        }

        select {
            font-weight: 500;
            color: #325d88;
        }
    </style>
    <form method="post">
        <div class="pt-4 mt-3" style="text-align: center">
            <div asp-validation-summary="All">
                <div class="row pb-2">
                    <h3 class="text-primary" style="text-align:center"> Browse Event</h3>
                    <hr />
                    <div style="font-weight: bold">
                    <ul style="list-style-type:none;">
                        <li>
            


                            <input type="hidden" asp-for="@Model.Event.EvId" />
                            <input disabled asp-for="@Model.Event.EvShortDescription" placeholder="Event Short Description" style="width:400px; text-align:center" />
                            <span asp-validation-for="@Model.Event.EvShortDescription" class="text-danger"></span>
                            <input disabled asp-for="@Model.Event.EvLocation" placeholder="Event Location" style="width:400px; text-align:center" />
                            <span asp-validation-for="@Model.Event.EvLocation" class="text-danger"></span>
                        </li>
                        <br />
                        <li>
                            <Label>  Event Type</Label>
                            <select disabled asp-for="@Model.Event.EvType" class="form-divided">
                                <option value="Golf Round">Golf Round</option>
                                <option value="Golf Dinner">Golf Dinner</option>
                            </select>
                            <Label>  Event Start</Label>
                            <input type="Date" disabled asp-for="@Model.Event.EvDate" class="field-divided" placeholder="Event Date" size="10" />
                            <span asp-validation-for="@Model.Event.EvDate" class="text-danger"></span>

                            <input type="Time" disabled asp-for="@Model.Event.EvTime" class="field-divided" placeholder="Event Time" size="10" />
                            <span asp-validation-for="@Model.Event.EvTime" class="text-danger"></span>
                            <Label>  Event End</Label>
                            <input type="Date" disabled asp-for="@Model.Event.EvEndDate" class="field-divided" placeholder="Event Date" size="10" />
                            <span asp-validation-for="@Model.Event.EvEndDate" class="text-danger"></span>
                            <input type="Time" disabled asp-for="@Model.Event.EvEndTime" class="field-divided" placeholder="Event End Time" size="10" />
                            <span asp-validation-for="@Model.Event.EvEndTime" class="text-danger"></span>
                        </li>
                        <br />
                        <li>
                            <Label>Reg Method</Label>
                            <select disabled asp-for="@Model.Event.EvRegMethod" class="form-divided">
                                <option value="Email">Email</option>
                                <option value="Phone">Onsite</option>
                                <option value="Phone">Both</option>
                            </select>
                            <Label>  Reg Start</Label>
                            <input type="Date" disabled asp-for="@Model.Event.EvRegStartDate" class="field-divided"
                                   placeholder="Event Registration Start Date" size="8" />
                            <span asp-validation-for="@Model.Event.EvRegStartDate" class="text-danger"></span>
                            <input type="Time" disabled asp-for="@Model.Event.EvRegStartTime" class="field-divided" size="8" />
                            <span asp-validation-for="@Model.Event.EvRegStartTime" class="text-danger"></span>
                            <Label>  Reg End</Label>
                            <input type="Date" disabled asp-for="@Model.Event.EvRegEndDate" class="field-divided"
                                   placeholder="Event Registration Start Date" size="8" />
                            <span asp-validation-for="@Model.Event.EvRegEndDate" class="text-danger"></span>
                            <input type="Time" disabled asp-for="@Model.Event.EvRegEndTime" class="field-divided" size="8" />
                            <span asp-validation-for="@Model.Event.EvRegEndTime" class="text-danger"></span>
                        </li>
                        <br />
                        <li>
                            <Label>Price per Participant</Label>
                            <input disabled asp-for="@Model.Event.EvFeeAmount" class="field-divided"
                                   placeholder="Price" size="10" />
                            <span asp-validation-for="@Model.Event.EvFeeAmount" class="text-danger"></span>
                            <Label>Instructions / Comments</Label>
                            <input disabled asp-for="@Model.Event.EvRegComment" class="field-divided"
                                   placeholder="Registration Comment" size="40" />
                            <span asp-validation-for="@Model.Event.EvRegComment" class="text-danger"></span>
                        </li>
                        <br />
                        <li>
                            <input disabled asp-for="@Model.Event.EvContactFName" class="field-divided"
                                   placeholder="Contact First Name" size="18" />
                            <span asp-validation-for="@Model.Event.EvContactFName" class="text-danger"></span>
                            &nbsp
                            <input disabled asp-for="@Model.Event.EvContactLName" class="field-divided"
                                   placeholder="Contact Last Name" size="18" />
                            <span asp-validation-for="@Model.Event.EvContactLName" class="text-danger"></span>
                            &nbsp
                            <input disabled asp-for="@Model.Event.EvContactEmail" class="field-divided"
                                   placeholder="Contact Email" size="18" />
                            &nbsp
                            <span asp-validation-for="@Model.Event.EvContactEmail" class="text-danger"></span>
                            <input disabled asp-for="@Model.Event.EvContactPhoneNumber" class="field-divided"
                                   placeholder="Contact Phone Number" size="18" />
                            <span asp-validation-for="@Model.Event.EvContactPhoneNumber" class="text-danger"></span>
                        </li>
                        <br />
                        <li>
                            <textarea id="summernote" name="EvDescription" style="text-align:center"
                                      disabled asp-for="@Model.Event.EvDescription" placeholder="Event Description"></textarea>
                            <span asp-validation-for="@Model.Event.EvDescription" class="text-danger"></span>
                        </li>
                    </ul>
                </div>
                </div>
            </div>
        </div>
        <div class="modal" id="myModal">
            {
            <div class="modal-dialog modal-dialog-scrollable" overflow-y="initial" role="document">
                   <!-- Modal content goes here -->
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Select Event Participants</h5>
                        <button type="button" class="close" data-bs-dismiss="modal">X</button>
                    </div>
                    <div class="modal-body" height="80vh" overflow-y="auto" >
                       
                        <form>
                            <div Style="border: 2px solid lightblue; border-radius: 6px;">
                                <p class="alignleft"  Style="font-weight: bold; text-align: left; font-size:small; height:5px; color: #325d88;">
                                    Current Partipant
                                </p>
                                <p class="alignright" Style="font-weight: bold; text-align: left; font-size:small; height:5px; color: #325d88;">
                                    Delete&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp
                                </p>

                                <div style="width:100%;overflow:auto; max-height:100px;">
                                <table>
                                   <tbody>
                                        @if (Model != null)
                                        {
                                            for (int i = 0; i < Model.Participants.Count; i++)
                                            {
                                             <tr >
                                                <td style="width: 400px">
                                                    @Model.Participants[i].EPFName @Model.Participants[i].EPLName
                                                </td>
                                                <td>
                                                    <div class="w-50 bntn-group" role="group">
                                                        <a asp-controller="Event" asp-action="DeleteParticipant" asp-route-EPId="@Model.Participants[i].EPId" class="btn btn-danger">
                                                            <i img="trash-fill-sm.svg."></i>
                                                        </a>
                                                    </div>
                                                </td>
                                            </tr>
                                            }
                                        }
                                    </tbody>
                                </table>
                            </div>
                            </div>
                            <br/>
                            <div Style="border: 2px solid lightblue; border-radius: 6px;">
                                <p Style="font-weight: bold; text-align: left; font-size:small; color: #325d88;">
                                    Select Participants from Members (ctrl(cmd) + shift to select multiple)
                                </p>
                                @if (Model != null)
                                {
                                    <input type="hidden" asp-for="@Model.AvailableRecipients" />
                                    <input type="hidden" asp-for="@Model.Event.EvDate" />
                                    <input type="hidden" asp-for="@Model.Event.EvId" />
                                    <input type="hidden" asp-for="@Model.Event.EvShortDescription" />
                                    <input type="hidden" asp-for="@Model.Event.EvTime" />
                                    <input type="hidden" asp-for="@Model.Event.EvDescription" />


                                    <select asp-for="@Model.EventParticipants" id="languages" asp-items="@Model.AvailableRecipients" size="4" multiple="multiple"
                                    class="form-control selectpicker show-tick select-all" data-selected-text-format="count > 2">
                                        <span asp-validation-for="@Model.EventParticipants" class="text-danger"></span>
                                    </select>
                               
                                }

                            </div>
                            <br /> 
                            <div Style="border: 2px solid lightblue; border-radius: 6px;">
                                <p class="alignleft" Style="font-weight: bold; text-align: left; font-size:small; height:5px; color: #325d88;">
                                    Add Guests
                                </p>
                                <div style="width:100%;overflow:auto; font-weight: bold; font-size:x-small; color: #325d88;">
                                    <table>
                                        <tr>
                                            <th style="width: 7px">
                                                First Name
                                            </th>
                                            <th style="width: 7px">
                                                Last Name
                                            </th>
                                            <th style="width: 15px">
                                                Guest Email
                                            </th>
                                            <th style="width: 10px">
                                                Guest Phone
                                            </th>
                                        </tr>
                                        <tbody>
                                            <tr>
                                                <td style="width: 7px">
                                                    <input asp-for=@Model.GuestFName />
                                                </td>
                                                <td style="width: 7px">
                                                    <input asp-for=@Model.GuestLName />
                                                </td>
                                                <td style="width: 15px">
                                                    <input asp-for=@Model.GuestEmail />
                                                </td>
                                                <td style="width: 10px">
                                                    <input asp-for=@Model.GuestPhone />
                                                </td>
                                            </tr>
                                    </table>
                                </div>
                            </div>
                            <script>
                                $(document).ready(function () {
                                    $('#myModal').modal('show');

                                    $('.selectpicker.select-all').on('change', function () {
                                       
                                    }).trigger('change');

                                    // Assuming you have a button with the ID 'submit'
                                    $("#submit").click(function () {
                                        var selectedValues = $("#languages option:selected").map(function () {
                                            return this.value;
                                        }).get().join(",");
                                    });
                                });
                            </script>
                            <div class="modal-footer">
                                <div class="col-2" style="text-align:center">
                                    <button type="button" class="btn btn-Secondary form-control" data-bs-dismiss="modal">Cancel</button>
                                </div>
                                <div class="col-4" style="text-align:center">
                                    <button type="submit" class="btn btn-primary form-control">Add Partcipant</button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            }
        </div>
        <div class="row">
            <div class="col-4" style="text-align:center">
                <a asp asp-controller="Event" asp-action="Index" class="btn btn-secondary form-control">
                    Back to List
                </a>
            </div>

            <div class="col-4">
                <a asp asp-controller="Event" asp-action="EventParticipant" asp-route-EvId="@Model.Event.EvId"
                   class="btn btn-primary form-control">
                    Add Participants
                </a>
            </div>
            <div class="col-4">
                <a asp asp-controller="Event" asp-action="EventEmail" asp-route-EvId="@Model.Event.EvId"
                   class="btn btn-primary form-control">
                    Email Event
                </a>
            </div>
        </div>
    </form>
</div>
@section Scripts {
    <script>
        $('#summernote').summernote({
            placeholder: 'Create Event',
            height: 150,
            minHeight: null,
            maxHeight: null,
            focus: true,
            toolbar: [
                ['style', ['style']],
                ['font', ['bold', 'italic', 'underline', 'clear']],
                ['fontname', ['fontname']],
                ['fontsize', ['fontsize']],
                ['color', ['color']],
                ['para', ['ul', 'ol', 'paragraph']],
                ['height', ['height']],
                ['insert', ['picture', 'link', 'video']],
                ['table', ['table']],
                ['view', ['fullscreen', 'codeview']],
            ]
        });

        let buttons = $('.note-editor button[data-toggle="dropdown"]');

        buttons.each((key, value) => {
            $(value).on('click', function (e) {
                $(this).attr('data-bs-toggle', 'dropdown')
                console.log()
                ata('id', 'dropdownMenu');
            })
        });

        $('#summernote').summernote('disable');

    </script>

    @{
        <partial name="_ValidationScriptsPartial" />
    }
}


